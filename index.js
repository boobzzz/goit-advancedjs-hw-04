import{a as C,i as R,S as G}from"./assets/vendor-mj6yH6lW.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const O="49648507-d50f841642650241279dda9b6",x="https://pixabay.com/api/",B=15;let y=1,S="";async function I(e,{onStart:n,onSuccess:o,onError:i,onFinally:t}){n(),y=1,S=e,await b({onSuccess:o,onError:i,onFinally:t})}async function M({onStart:e,onSuccess:n,onError:o,onFinally:i}){e(),y++,await b({onSuccess:n,onError:o,onFinally:i})}async function b({onSuccess:e,onError:n,onFinally:o}){try{const i=await C.get(x,{params:{key:O,q:encodeURIComponent(S),per_page:B,page:y}});e(i.data.hits)}catch{n()}finally{o()}}const A={no_query:"Please, enter your search query",not_found:"Sorry, no images matching search query",no_more:"Sorry, no more images to load",failed:"Sorry, images failed to fetch"};function l(e){R.error({message:A[e]})}const L=document.querySelector(".form"),s=document.querySelector(".gallery"),p=document.querySelector(".load-more"),F=["Likes","Views","Comments","Downloads"];function T(e){if(k(),e.length===0){l("not_found");return}e.forEach(n=>{s.append(q(n))}),N(),w()}function U(e){if(e.length===0){l("no_more"),d();return}e.forEach(n=>{s.append(q(n))}),D()}function N(){s.style.display="grid"}function v(){s.style.display="none"}function w(){p.style.visibility="visible"}function d(){p.style.visibility="hidden"}function k(){for(;s.lastElementChild;)s.removeChild(s.lastElementChild)}function q(e){const{webformatURL:n,largeImageURL:o,tags:i}=e,t=document.createElement("li");t.classList.add("gallery-cart");const r=document.createElement("a");r.classList.add("gallery-link"),r.href=o;const a=document.createElement("img");a.classList.add("gallery-image"),a.src=n,a.title=i;const u=document.createElement("div");return u.classList.add("gallery-details"),F.forEach(E=>{const c=document.createElement("div");c.classList.add("detail");const f=document.createElement("p");f.classList.add("detail-title");const m=document.createElement("p");m.classList.add("detail-desc"),f.innerText=E,m.innerText=e[E.toLowerCase()],c.append(f),c.append(m),u.append(c)}),r.append(a),r.append(u),t.append(r),t}function D(){scrollBy({top:s.children[0].getBoundingClientRect().height*2,behavior:"smooth"})}const _=document.querySelector(".loader");function P(){_.style.visibility="visible"}function h(){_.style.visibility="hidden"}const g=new G(".gallery-link");v();d();h();L.addEventListener("submit",e=>{e.preventDefault();const n=new FormData(L).get("query");if(!n){l("no_query");return}I(n,{onStart:()=>{v(),d(),P()},onSuccess:o=>{T(o),g.refresh()},onError:()=>l("failed"),onFinally:h})});s.addEventListener("click",()=>{g.open()});p.addEventListener("click",()=>{M({onStart:()=>{d(),P()},onSuccess:e=>{g.refresh(),U(e)},onError:()=>l("failed"),onFinally:()=>{h(),w()}})});
//# sourceMappingURL=index.js.map
