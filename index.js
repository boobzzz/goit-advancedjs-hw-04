import{a as P,i as C,S as R}from"./assets/vendor-mj6yH6lW.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const x="49648507-d50f841642650241279dda9b6",G="https://pixabay.com/api/",O=15;let g=1,E="";async function B(e,{onStart:n,onSuccess:o,onError:a,onFinally:t}){n(),E=e,await L({onSuccess:o,onError:a,onFinally:t})}async function I({onStart:e,onSuccess:n,onError:o,onFinally:a}){e(),g++,await L({onSuccess:n,onError:o,onFinally:a})}async function L({onSuccess:e,onError:n,onFinally:o}){try{const a=await P.get(G,{params:{key:x,q:encodeURIComponent(E),per_page:O,page:g}});e(a.data.hits)}catch{n()}finally{o()}}const M={no_query:"Please, enter your search query",not_found:"Sorry, no images matching search query",no_more:"Sorry, no more images to load",failed:"Sorry, images failed to fetch"};function c(e){C.error({message:M[e]})}const h=document.querySelector(".form"),s=document.querySelector(".gallery"),m=document.querySelector(".load-more"),A=["Likes","Views","Comments","Downloads"];function F(e){if(N(),e.length===0){c("not_found");return}e.forEach(n=>{s.append(b(n))}),U(),S()}function T(e){if(e.length===0){c("no_more"),w();return}e.forEach(n=>{s.append(b(n))}),D()}function U(){s.style.display="grid"}function k(){s.style.display="none"}function S(){m.style.display="block"}function w(){m.style.display="none"}function N(){for(;s.lastElementChild;)s.removeChild(s.lastElementChild)}function b(e){const{webformatURL:n,largeImageURL:o,tags:a}=e,t=document.createElement("li");t.classList.add("gallery-cart");const r=document.createElement("a");r.classList.add("gallery-link"),r.href=o;const l=document.createElement("img");l.classList.add("gallery-image"),l.src=n,l.title=a;const d=document.createElement("div");return d.classList.add("gallery-details"),A.forEach(p=>{const i=document.createElement("div");i.classList.add("detail");const u=document.createElement("p");u.classList.add("detail-title");const f=document.createElement("p");f.classList.add("detail-desc"),u.innerText=p,f.innerText=e[p.toLowerCase()],i.append(u),i.append(f),d.append(i)}),r.append(l),r.append(d),t.append(r),t}function D(){scrollBy({top:s.children[0].getBoundingClientRect().height*2,behavior:"smooth"})}const q=document.querySelector(".loader");function _(){q.style.display="flex"}function v(){q.style.display="none"}const y=new R(".gallery-link");h.addEventListener("submit",e=>{e.preventDefault();const n=new FormData(h).get("query");if(!n){c("no_query");return}B(n,{onStart:()=>{k(),_()},onSuccess:o=>{F(o),y.refresh()},onError:()=>c("failed"),onFinally:v})});s.addEventListener("click",()=>{y.open()});m.addEventListener("click",()=>{I({onStart:()=>{w(),_()},onSuccess:e=>{y.refresh(),T(e)},onError:()=>c("failed"),onFinally:()=>{v(),S()}})});
//# sourceMappingURL=index.js.map
